<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Ввод данных</title>
    <style type="text/css">
        .on {
            border: 1px outset;
            color: #369;
            background: #efefef;
        }

        .off {
            border: 1px outset;
            color: #369;
            background: #f9d543;
        }
    </style>
</head>

<body>
    <div>
        <h2>Ввод данных</h2>
        <input type="text" id="value" name="value" /><br><br>
        <p id="fileStatus"></p>
        <br>
        <input type="button" id="send" value="Отправить" />
        <input type="button" id="delete" value="Удалить" />
        <input type="button" id="create" value="Создать файл" />
        <br><br>
        <div>
            <input type="text" id="name" name="value" />
            <input type="text" id="secondName" name="value" />
            <input type="text" id="age" name="value" />
            <input type="checkbox" id="isAdmin" name="scales" checked />
            <br>
            <input type="button" id="sendJson" value="Отправить форму" />
        </div>
    </div>
</body>
<script>
    // adminBool = ""
    // function togglestyle(el) {
    //     if (el.className == "on") {
    //         el.className = "off";
    //         adminBool = ""
    //     } else {
    //         el.className = "on";
    //        adminBool = "1"
    //     }
    // }

    function sendForm() {
        let form = {
            Name: document.getElementById("name").value,
            SecondName: document.getElementById("secondName").value,
            Age: Math.round(document.getElementById("age").value),
            IsAdmin: document.getElementById("isAdmin").checked
        }
        let json = JSON.stringify(form)
        console.log(json)
        fetch("/requestJson", { method: "POST", body: json })
    }
    document.getElementById("sendJson").onclick = function () {
        sendForm()
    }

    setInterval(() => fetch("/isExist", { method: "POST" })
        .then(response => response.text())
        .then(responseText => {
            if (responseText == "true") {
                document.getElementById("fileStatus").innerHTML = "Файл существует"
            } else {
                document.getElementById("fileStatus").innerHTML = "Файл отсутсвует"
            }
        }), 1000)

    document.getElementById("send").onclick = function () {
        console.log(document.getElementById("value").value)
        fetch("/send", { method: "POST", body: document.getElementById("value").value })
    }

    document.getElementById("delete").onclick = function () {
        fetch("/delete", { method: "POST", body: "1" })
    }

    document.getElementById("create").onclick = function () {
        fetch("/create", { method: "POST" })
    }

</script>

</html>